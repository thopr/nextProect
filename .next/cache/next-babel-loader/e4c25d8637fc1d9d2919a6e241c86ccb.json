{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from \"react\"; //\n\nimport { useForm } from \"react-hook-form\";\nimport api from \"../services/Api\";\nimport { GetCategories } from \"../services/api_get\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { useAlert } from \"react-alert\";\nimport { useRouter } from \"next/router\";\nimport useAuth, { ProtectRoute } from \"../contexts/auth.js\";\n\nfunction NewCoubonForm(_ref) {\n  var Branch_id = _ref.Branch_id,\n      BracnhCode = _ref.BracnhCode,\n      GoBackAndTriggerMutation = _ref.GoBackAndTriggerMutation,\n      changenewCompany = _ref.changenewCompany;\n  var alert = useAlert();\n  var router = useRouter();\n\n  var _useAuth = useAuth(),\n      toggler = _useAuth.toggler,\n      settoggler = _useAuth.settoggler,\n      loading = _useAuth.loading;\n\n  var _useState = useState(false),\n      spinner = _useState[0],\n      setspinner = _useState[1];\n\n  var _useState2 = useState(false),\n      sponsors = _useState2[0],\n      setsponsors = _useState2[1];\n\n  var _useState3 = useState(false),\n      InputTypedis = _useState3[0],\n      setInputTypedis = _useState3[1];\n\n  var _useState4 = useState(false),\n      InputTypecode = _useState4[0],\n      setInputTypecode = _useState4[1];\n\n  var _GetCategories = GetCategories(),\n      data = _GetCategories.data,\n      isLoading = _GetCategories.isLoading,\n      isError = _GetCategories.isError;\n\n  var results = isLoading ? false : data.data;\n  var showSkeleton = isLoading || loading;\n\n  var _useForm = useForm({//mode: \"onChange\",\n  }),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors;\n\n  var id = Branch_id;\n\n  var onSubmit = function onSubmit(formdata) {\n    formdata = _objectSpread(_objectSpread({}, formdata), {}, {\n      id: id,\n      BracnhCode: BracnhCode,\n      sponsors: sponsors\n    });\n    setspinner(true);\n    console.log(formdata);\n    api.post(\"rabwa/newCoubon\", formdata).then(function (res) {\n      console.log(res.data);\n      setspinner(false);\n\n      if (res.data == \"already exists\") {\n        alert.show(\"إسم الكوبون موجود مسبقا \", {\n          timeout: 2000,\n          type: \"error\"\n        });\n      }\n\n      if (res.data == \"email\") {\n        alert.show(\"الإيميل مستخدم مسبقا\", {\n          timeout: 2000,\n          type: \"error\"\n        });\n      }\n\n      if (res.data > 0) {\n        alert.show(\"تم بنجاح\", {\n          timeout: 2000,\n          type: \"success\"\n        });\n        GoBackAndTriggerMutation(); //router.push(\"/companys/[name]\", \"/companys/\" + formdata.companyName);\n      }\n    })[\"catch\"](function (err) {\n      console.log(err);\n      setspinner(false);\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    style: {\n      \"float\": \"right\"\n    }\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      changenewCompany();\n    },\n    \"class\": \"btn btn-icon btn-primary\",\n    type: \"button\"\n  }, __jsx(\"span\", {\n    \"class\": \"btn-inner--icon\"\n  }, __jsx(\"i\", {\n    \"class\": \"fa fa-arrow-right\",\n    \"aria-hidden\": \"true\"\n  }))), __jsx(\"h2\", {\n    style: {\n      marginRight: \"0.8em\",\n      display: \"inline\"\n    }\n  }, \"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0643\\u0648\\u0628\\u0648\\u0646\\u0627\\u062A :\"), __jsx(\"div\", {\n    style: {\n      clear: \"both\"\n    }\n  })), __jsx(\"br\", null), __jsx(\"div\", {\n    \"class\": \"col-xl-12 col-md-12\",\n    style: {\n      height: \"50px\"\n    }\n  }), __jsx(\"div\", {\n    style: {\n      marginRight: \"2%\",\n      marginBottom: \"2%\"\n    },\n    \"class\": \"custom-control custom-checkbox\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    \"class\": \"custom-control-input\",\n    id: \"customCheck1\",\n    name: \"sponsors\",\n    value: sponsors,\n    onChange: function onChange(e) {\n      setsponsors(!sponsors);\n    }\n  }), __jsx(\"label\", {\n    \"class\": \"custom-control-label\",\n    \"for\": \"customCheck1\"\n  }, \"\\u062A\\u0628\\u0631\\u0639 \\u061F\", \" \")), __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, sponsors ? __jsx(React.Fragment, null, \" \", __jsx(\"h6\", {\n    className: \"heading-small text-muted mb-4\"\n  }, \"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u062F\\u0627\\u0639\\u0645 \"), __jsx(\"div\", {\n    className: \"pl-lg-4\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u062F\\u0627\\u0639\\u0645\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"SName\",\n    ref: register({\n      required: true\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u062F\\u0627\\u0639\\u0645\"\n  })), errors.SName && errors.SName.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\")), \" \", __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062A\\u0628\\u0631\\u0639\"), __jsx(\"input\", {\n    type: \"number\",\n    name: \"Svalue\",\n    ref: register({\n      required: true\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0627\\u0644\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u0645\\u062A\\u0628\\u0631\\u0639 \\u0628\\u0647\\u0627 (\\u064A\\u0645\\u0643\\u0646 \\u0623\\u0646 \\u062A\\u0643\\u0648\\u0646 \\u062C\\u0632\\u0621 \\u0645\\u0646 \\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u0643\\u0648\\u0628\\u0648\\u0646\\u0627\\u062A)\"\n  })), errors.Svalue && errors.Svalue.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\")), __jsx(\"div\", {\n    className: \"col-lg-12\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\"), __jsx(\"input\", {\n    type: \"number\",\n    name: \"Sphone\",\n    ref: register({\n      required: true\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\"\n  })), errors.Sphone && errors.Sphone.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"))))) : \"\", __jsx(\"h6\", {\n    className: \"heading-small text-muted mb-4\"\n  }, \"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u0643\\u0648\\u0628\\u0648\\u0646\"), __jsx(\"div\", {\n    className: \"pl-lg-4\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-lg-12\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0643\\u0648\\u0628\\u0648\\u0646\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"coubonName\",\n    ref: register({\n      required: true,\n      minLength: 3\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0643\\u0648\\u0628\\u0648\\u0646\"\n  })), errors.coubonName && errors.coubonName.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"), errors.coubonName && errors.coubonName.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0627\\u0644\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644 \\u0642\\u0635\\u064A\\u0631 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\")), __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0627\\u0644\\u0646\\u0648\\u0639\"), __jsx(\"select\", {\n    name: \"type\",\n    ref: register({\n      required: true\n    }),\n    onChange: function onChange(e) {\n      if (e.target.value == \"discount\") {\n        setInputTypedis(true);\n      } else {\n        setInputTypedis(false);\n      }\n\n      if (e.target.value == \"all_code\" || e.target.value == \"one_code\") {\n        setInputTypecode(true);\n      } else {\n        setInputTypecode(false);\n      }\n    },\n    \"class\": \"form-control\"\n  }, __jsx(\"option\", {\n    value: \"cash\"\n  }, \"\\u0645\\u062C\\u0627\\u0646\\u064A\"), __jsx(\"option\", {\n    value: \"basket\"\n  }, \"\\u0639\\u064A\\u0646\\u064A\"), __jsx(\"option\", {\n    value: \"discount\"\n  }, \"\\u062E\\u0635\\u0645\"), __jsx(\"option\", {\n    value: \"all_code\"\n  }, \"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0645\\u0646\\u0635\\u0627\\u062A\"), __jsx(\"option\", {\n    value: \"one_code\"\n  }, \"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0645\\u0646\\u0635\\u0627\\u062A (\\u0627\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \\u0644\\u0645\\u0631\\u0629 \\u0648\\u0627\\u062D\\u062F\\u0629)\")))), InputTypecode ? __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0627\\u0644\\u0643\\u0648\\u062F\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"code\",\n    ref: register({\n      required: true\n    }),\n    className: \"form-control\",\n    placeholder: \"Free10\"\n  })), errors.code && errors.code.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\")) : __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"), __jsx(\"input\", {\n    type: \"number\",\n    name: \"coubonsAmount\",\n    ref: register({\n      required: true\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0643\\u0645\\u064A\\u0629 \\u0627\\u0644\\u0643\\u0648\\u0628\\u0648\\u0646\\u0627\\u062A \\u0627\\u0644\\u0645\\u0631\\u0627\\u062F \\u0625\\u0646\\u0634\\u0627\\u0626\\u0647\\u0627\"\n  })), errors.coubonsAmount && errors.coubonsAmount.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\")), __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0641\"), __jsx(\"select\", {\n    name: \"category\",\n    ref: register({\n      required: true\n    }),\n    \"class\": \"form-control\"\n  }, results ? results.map(function (category, index) {\n    return __jsx(\"option\", {\n      value: category.id\n    }, category.name);\n  }) : \"\"))), showSkeleton ? __jsx(Skeleton, {\n    height: 10,\n    count: 2\n  }) : \"\", InputTypecode ? __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0627\\u0644\\u0631\\u0627\\u0628\\u0637 \"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"url\",\n    ref: register({\n      required: true\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0631\\u0627\\u0628\\u0637 \\u0627\\u0644\\u0645\\u0648\\u0642\\u0639 , \\u0627\\u0644\\u062A\\u0637\\u0628\\u064A\\u0642 \\u0627\\u0644\\u062E \"\n  })), errors.url && errors.url.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\")) : __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \" \\u0627\\u0644\\u0642\\u064A\\u0645\\u0629\"), __jsx(\"div\", {\n    \"class\": \"input-group\"\n  }, InputTypedis == true ? __jsx(\"div\", {\n    \"class\": \"input-group-prepend\"\n  }, __jsx(\"span\", {\n    \"class\": \"input-group-text\"\n  }, \"%\")) : __jsx(\"div\", {\n    \"class\": \"input-group-prepend\"\n  }, __jsx(\"span\", {\n    \"class\": \"input-group-text\"\n  }, \"\\u0631.\\u0633\")), \" \", __jsx(\"input\", {\n    type: \"number\",\n    name: \"value\",\n    style: {\n      \"float\": \"left\"\n    },\n    ref: register({\n      required: true\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0627\\u0644\\u0642\\u064A\\u0645\\u0629\"\n  }))), errors.value && errors.value.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\")), __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \" \\u064A\\u0646\\u062A\\u0647\\u064A \\u0628\\u0639\\u062F\"), __jsx(\"div\", {\n    \"class\": \"input-group\"\n  }, __jsx(\"input\", {\n    type: \"number\",\n    name: \"end\",\n    style: {\n      \"float\": \"left\"\n    },\n    ref: register({\n      required: true\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0623\\u0634\\u0647\\u0631\"\n  }), __jsx(\"div\", {\n    \"class\": \"input-group-prepend\"\n  }, __jsx(\"span\", {\n    \"class\": \"input-group-text\"\n  }, \"\\u0634\\u0647\\u0631\")))), errors.end && errors.end.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\")), InputTypecode ? __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    \"class\": \"form-group\"\n  }, __jsx(\"label\", {\n    \"class\": \"form-control-label\"\n  }, \" \\u0627\\u0644\\u0648\\u0635\\u0641\"), __jsx(\"textarea\", {\n    rows: \"4\",\n    \"class\": \"form-control\",\n    name: \"des\",\n    ref: register({\n      minLength: 3\n    }),\n    placeholder: \"\\u0648\\u0635\\u0641 \\u0627\\u0648 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u0625\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \"\n  }), errors.des && errors.des.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0627\\u0644\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644\\u0629 \\u0642\\u0635\\u064A\\u0631\\u0629 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\"))) : \"\", __jsx(\"div\", {\n    className: \"col-lg-12\"\n  }, __jsx(\"div\", {\n    \"class\": \"form-group\"\n  }, __jsx(\"label\", {\n    \"class\": \"form-control-label\"\n  }, \" \\u0627\\u0644\\u0634\\u0631\\u0648\\u0637 \\u0648\\u0627\\u0644\\u0623\\u062D\\u0643\\u0627\\u0645\"), __jsx(\"textarea\", {\n    rows: \"4\",\n    \"class\": \"form-control\",\n    name: \"Terms\",\n    ref: register({\n      minLength: 3\n    }),\n    placeholder: \"\\u0634\\u0631\\u0648\\u0637 \\u0648\\u0623\\u062D\\u0643\\u0627\\u0645 \\u0635\\u0631\\u0641 \\u0627\\u0644\\u0643\\u0648\\u0628\\u0648\\u0646\\u0627\\u062A\"\n  }), errors.Terms && errors.Terms.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0627\\u0644\\u0634\\u0631\\u0648\\u0637 \\u0648\\u0627\\u0644\\u0623\\u062D\\u0643\\u0627\\u0645 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644\\u0629 \\u0642\\u0635\\u064A\\u0631\\u0629 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\"))))), spinner ? __jsx(\"button\", {\n    className: \"btn btn-default\",\n    disabled: true,\n    style: {\n      \"float\": \"left\"\n    }\n  }, __jsx(\"span\", {\n    className: \"spinner-grow spinner-grow-sm\"\n  }), \"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u0625\\u0631\\u0633\\u0627\\u0644 ..\") : __jsx(\"input\", {\n    style: {\n      \"float\": \"left\"\n    },\n    type: \"submit\",\n    className: \"btn btn-default\",\n    value: loading ? \"Loading...\" : \"إنشاء كوبون\"\n  })));\n}\n\nexport default NewCoubonForm;","map":null,"metadata":{},"sourceType":"module"}