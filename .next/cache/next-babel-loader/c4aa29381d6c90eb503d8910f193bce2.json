{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useContext } from \"react\"; //\n\nimport { useForm } from \"react-hook-form\";\nimport api from \"../services/Api\";\nimport { GetCCAs } from \"../services/api_get\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { useAlert } from \"react-alert\";\nimport Cookies from \"js-cookie\";\nimport { useRouter } from \"next/router\";\nimport useAuth, { ProtectRoute } from \"../contexts/auth.js\";\nimport ButtonUploadImage from \"./button-upload/ButtonUpload\";\nimport axios from \"axios\";\n\nfunction NewBranchForm({\n  company_id,\n  GoBackAndTriggerMutation,\n  changenewCompany,\n  companyName\n}) {\n  const alert = useAlert();\n  const router = useRouter();\n  const token = Cookies.get(\"token\");\n  const siteUrl = Cookies.get(\"siteUrl\");\n  const {\n    toggler,\n    settoggler,\n    loading\n  } = useAuth();\n  const {\n    0: spinner,\n    1: setspinner\n  } = useState(false);\n  const {\n    0: imeges,\n    1: setimeges\n  } = useState([]);\n  const {\n    data,\n    isLoading,\n    isError\n  } = GetCCAs();\n  const results = isLoading ? false : data.data;\n  console.log(company_id);\n  const showSkeleton = isLoading || loading;\n  const {\n    0: citys,\n    1: setcitys\n  } = useState([]);\n  const {\n    0: firstTime,\n    1: setfirstTime\n  } = useState(true);\n\n  if (firstTime && results) {\n    setcitys(results[0].data);\n    setfirstTime(false);\n  }\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({//mode: \"onChange\",\n  });\n\n  function handleThumbnailProduct(file) {\n    let imageObj = {\n      id: file.name,\n      name: file.name,\n      isUloading: true,\n      imageObject: file\n    };\n    console.log(imageObj);\n    let formData = new FormData();\n    formData.append(\"file\", file);\n    axios.post(siteUrl + \"wp/v2/media\", formData, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(result => {\n      console.log(result.data.source_url);\n      let tempimegesarray = imeges;\n      tempimegesarray.push(result.data.source_url);\n      console.log(tempimegesarray);\n      setimeges(tempimegesarray);\n    });\n  }\n\n  const onSubmit = formdata => {\n    formdata = _objectSpread(_objectSpread({}, formdata), {}, {\n      company_id,\n      imeges\n    });\n    setspinner(true);\n    api.post(\"rabwa/newBranch\", formdata).then(res => {\n      console.log(res.data);\n      setspinner(false);\n\n      if (res.data == \"phone\") {\n        alert.show(\"رقم الجوال مستخدم مسبقا\", {\n          timeout: 2000,\n          type: \"error\"\n        });\n      }\n\n      if (res.data > 0 || res.data == true) {\n        alert.show(\"تم بنجاح\", {\n          timeout: 2000,\n          type: \"success\"\n        });\n        GoBackAndTriggerMutation();\n        changenewCompany(); //router.push(\"/companys/[name]\", \"/companys/\" + formdata.companyName);\n      }\n    }).catch(err => {\n      console.log(err);\n      setspinner(false);\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"h2\", null, companyName), __jsx(\"div\", {\n    style: {\n      float: \"right\"\n    }\n  }, __jsx(\"button\", {\n    onClick: () => {\n      changenewCompany();\n    },\n    class: \"btn btn-icon btn-primary\",\n    type: \"button\"\n  }, __jsx(\"span\", {\n    class: \"btn-inner--icon\"\n  }, __jsx(\"i\", {\n    class: \"fa fa-arrow-right\",\n    \"aria-hidden\": \"true\"\n  }))), __jsx(\"h2\", {\n    style: {\n      marginRight: \"0.8em\",\n      display: \"inline\"\n    }\n  }, \"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0641\\u0631\\u0639 \\u062C\\u062F\\u064A\\u062F :\"), __jsx(\"div\", {\n    style: {\n      clear: \"both\"\n    }\n  })), __jsx(\"br\", null), __jsx(\"div\", {\n    class: \"col-xl-12 col-md-12\",\n    style: {\n      height: \"50px\"\n    }\n  }), __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(\"h6\", {\n    className: \"heading-small text-muted mb-4\"\n  }, \"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u0641\\u0631\\u0639\"), __jsx(\"div\", {\n    className: \"pl-lg-4\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0641\\u0631\\u0639\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"branchName\",\n    ref: register({\n      required: true,\n      minLength: 3\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0641\\u0631\\u0639\"\n  })), errors.branchName && errors.branchName.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"), errors.branchName && errors.branchName.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0627\\u0644\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644 \\u0642\\u0635\\u064A\\u0631 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\")), __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0648\\u0635\\u0641 \\u0642\\u0635\\u064A\\u0631\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"branchShortDesc\",\n    ref: register({\n      required: true,\n      minLength: 3,\n      maxLength: 100\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0648\\u0635\\u0641 \\u0642\\u0635\\u064A\\u0631\"\n  })), errors.branchShortDesc && errors.branchShortDesc.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"), errors.branchShortDesc && errors.branchShortDesc.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0627\\u0644\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644 \\u0642\\u0635\\u064A\\u0631 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\"), errors.branchShortDesc && errors.branchShortDesc.type === \"maxLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0627\\u0644\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644 \\u0637\\u0648\\u064A\\u0644 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\")), __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0627\\u0644\\u062F\\u0648\\u0644\\u0629\"), __jsx(\"select\", {\n    name: \"county\",\n    ref: register({\n      required: true\n    }),\n    onChange: e => {\n      let selectedCounty = e.target.value;\n      /*if (firstTime) {\r\n      setfirstTime(false);\r\n      }*/\n\n      for (let index = 0; index < results.length; index++) {\n        const tempconunty = results[index];\n\n        if (tempconunty.name === selectedCounty) {\n          setcitys(tempconunty.data);\n        }\n      }\n    },\n    class: \"form-control\"\n  }, results ? results.map((county, index) => {\n    return __jsx(\"option\", null, county.name);\n  }) : \"\"))), __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0627\\u0644\\u0645\\u062F\\u064A\\u0646\\u0629\"), __jsx(\"select\", {\n    name: \"city\",\n    ref: register({\n      required: true\n    }),\n    class: \"form-control\"\n  }, citys.length > 0 ? citys.map((city, index) => {\n    return __jsx(\"option\", {\n      value: city.name\n    }, city.name);\n  }) : \"\"))), showSkeleton ? __jsx(Skeleton, {\n    height: 10,\n    count: 2\n  }) : \"\", __jsx(\"div\", {\n    className: \"col-lg-12\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0631\\u0639\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"branchAddress\",\n    ref: register({\n      required: true,\n      minLength: 3\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0641\\u0631\\u0639\"\n  })), errors.branchAddress && errors.branchAddress.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"), errors.branchAddress && errors.branchAddress.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644 \\u0642\\u0635\\u064A\\u0631 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\")), __jsx(\"div\", {\n    className: \"col-lg-12\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0631\\u0627\\u0628\\u0637 \\u0627\\u062D\\u062F\\u0627\\u062B\\u064A\\u0627\\u062A \\u062E\\u0631\\u0627\\u0626\\u0637 \\u063A\\u0648\\u063A\\u0644\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"direction_url\",\n    ref: register({\n      required: true,\n      minLength: 3\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0631\\u0627\\u0628\\u0637\"\n  })), errors.direction_url && errors.direction_url.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"), errors.direction_url && errors.direction_url.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0631\\u0627\\u0628\\u0637 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644 \\u0642\\u0635\\u064A\\u0631 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\")), __jsx(\"div\", {\n    class: \"col-xl-12 col-md-12\",\n    style: {\n      height: \"50px\"\n    }\n  }), __jsx(\"div\", {\n    className: \"col-lg-12\"\n  }, \"\\u0635\\u0648\\u0631 \\u0627\\u0644\\u0641\\u0631\\u0639 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\", __jsx(\"br\", null), imeges.length > 0 ? __jsx(React.Fragment, null, imeges.map((item, index) => {\n    return __jsx(React.Fragment, null, __jsx(\"a\", {\n      href: item\n    }, \"\\u0635\\u0648\\u0631\\u0629 \", index + 1), __jsx(\"br\", null));\n  })) : \"\", __jsx(\"br\", null), __jsx(ButtonUploadImage, {\n    typeImage: \"thumbnail\",\n    onChange: thumbnail => handleThumbnailProduct(thumbnail.target.files[0])\n  }), __jsx(\"hr\", null)), __jsx(\"div\", {\n    class: \"col-xl-12 col-md-12\",\n    style: {\n      height: \"50px\"\n    }\n  }))), __jsx(\"h6\", {\n    className: \"heading-small text-muted mb-4\"\n  }, \"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u062D\\u0633\\u0627\\u0628\"), __jsx(\"div\", {\n    className: \"pl-lg-4\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0627\\u0644\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0623\\u0648\\u0644\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"FirstName\",\n    ref: register({\n      required: true,\n      minLength: 3\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0627\\u0644\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0623\\u0648\\u0644\"\n  })), errors.FirstName && errors.FirstName.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"), errors.FirstName && errors.FirstName.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0627\\u0644\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644 \\u0642\\u0635\\u064A\\u0631 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\")), __jsx(\"div\", {\n    className: \"col-lg-6\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0627\\u0644\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0623\\u062E\\u064A\\u0631\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"LastName\",\n    ref: register({\n      required: true,\n      minLength: 3\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0627\\u0644\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0623\\u062E\\u064A\\u0631\"\n  })), errors.LastName && errors.LastName.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"), errors.LastName && errors.LastName.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0627\\u0644\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644 \\u0642\\u0635\\u064A\\u0631 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\")), __jsx(\"div\", {\n    className: \"col-lg-12\"\n  }, __jsx(\"div\", {\n    className: \"form-group\"\n  }, __jsx(\"label\", {\n    className: \"form-control-label\"\n  }, \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\"), __jsx(\"input\", {\n    type: \"number\",\n    name: \"Phone\",\n    ref: register({\n      required: true,\n      minLength: 12\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u0643\\u062A\\u0627\\u0628\\u0629 \\u0645\\u0641\\u062A\\u0627\\u062D \\u0627\\u0644\\u062F\\u0648\\u0644\\u0629 \\u0645\\u062B\\u0627\\u0644 966\"\n  })), errors.Phone && errors.Phone.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"), errors.Phone && errors.Phone.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    }\n  }, \"\\u064A\\u062C\\u0628 \\u0625\\u062F\\u062E\\u0627\\u0644 \\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644 \\u0635\\u0627\\u0644\\u062D\")))), spinner ? __jsx(\"button\", {\n    className: \"btn btn-default\",\n    disabled: true,\n    style: {\n      float: \"left\"\n    }\n  }, __jsx(\"span\", {\n    className: \"spinner-grow spinner-grow-sm\"\n  }), \"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u0625\\u0631\\u0633\\u0627\\u0644 ..\") : __jsx(\"input\", {\n    style: {\n      float: \"left\"\n    },\n    type: \"submit\",\n    className: \"btn btn-default\",\n    value: loading ? \"Loading...\" : \"إنشاء فرع\"\n  })));\n}\n\nexport default NewBranchForm;","map":null,"metadata":{},"sourceType":"module"}