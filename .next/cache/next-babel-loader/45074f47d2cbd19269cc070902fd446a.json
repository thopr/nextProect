{"ast":null,"code":"var __jsx = React.createElement;\nimport Admin_nav from \"../components/Admin_nav\";\nimport React, { useState, useEffect } from \"react\";\nimport HeaderNav from \"../components/HeaderNav\";\nimport ListMandobes from \"../components/ListMandobes\";\nimport UserInfo from \"../components/UserInfo\";\nimport api from \"../services/Api\";\nimport Footer from \"../components/Footer\";\nimport NeedyCheckApprove from \"../components/NeedyCheckApprove\";\nimport { GetApproveuserss, UserStatistics } from \"../services/api_get\";\nimport Skeleton from \"react-loading-skeleton\";\nimport useAuth, { ProtectRoute } from \"../contexts/auth.js\";\nimport { useAlert } from \"react-alert\";\nimport { mutate } from \"swr\";\n\nfunction GiveNeedyCoubon() {\n  //const [project,setProject] = useState(false);\n  const alert = useAlert();\n  const {\n    0: name,\n    1: setname\n  } = useState(0);\n  const {\n    0: ModelData,\n    1: setModelData\n  } = useState([]);\n  const {\n    0: modalType,\n    1: setmodalType\n  } = useState(\"\");\n  const {\n    0: pageup,\n    1: setpageup\n  } = useState(1);\n  useEffect(() => {\n    console.log(\"test2zzzzzzzz\");\n  }, [pageup]);\n  const {\n    0: members,\n    1: setmembers\n  } = useState(0);\n  const {\n    0: last_coubon,\n    1: setlast_coubon\n  } = useState(0);\n  const {\n    0: total_coubons,\n    1: settotal_coubons\n  } = useState(0);\n  const {\n    0: NewMandobe_id,\n    1: setNewMandobe_id\n  } = useState(0);\n  const {\n    0: piority,\n    1: setpiority\n  } = useState(0);\n  const {\n    0: page,\n    1: setpage\n  } = useState(1);\n  const {\n    0: Scity,\n    1: setScity\n  } = useState(\"جدة\");\n  const {\n    0: Saera,\n    1: setSaera\n  } = useState(\"all\");\n  const {\n    0: Scat,\n    1: setScat\n  } = useState(8);\n  const {\n    0: spinner,\n    1: setspinner\n  } = useState(false);\n  const {\n    user,\n    isAuthenticated,\n    loading\n  } = useAuth();\n  const {\n    data,\n    isLoading,\n    isError\n  } = GetApproveuserss();\n  const results = isLoading ? false : data.data;\n  console.log(results);\n  const users = isLoading ? false : results.users;\n  const showSkeleton = isLoading || loading;\n  const {\n    0: coubonTotal,\n    1: setcoubonTotal\n  } = useState(0);\n  const {\n    0: CCAs,\n    1: setCCAs\n  } = useState([]);\n  const {\n    0: categories,\n    1: setcategories\n  } = useState([]);\n  const {\n    0: firstTime,\n    1: setfirstTime\n  } = useState(true);\n  const {\n    0: newState,\n    1: setnewState\n  } = useState(true);\n  const {\n    0: statAll,\n    1: setstatAll\n  } = useState([]);\n  const {\n    0: list,\n    1: updateList\n  } = useState([]);\n  const {\n    0: allowed,\n    1: setallowed\n  } = useState(false);\n  /*\r\n    const { data, isLoading, isError } = GetCCAs();\r\n      const results = isLoading ? false : data.data;\r\n    */\n\n  const {\n    0: project,\n    1: setProject\n  } = useState(false);\n  const {\n    0: choose,\n    1: setChoose\n  } = useState(\"category\");\n  const {\n    0: category,\n    1: setCategory\n  } = useState(\"\");\n  const {\n    0: company,\n    1: setCompany\n  } = useState(\"\");\n  const {\n    0: branch,\n    1: setBranch\n  } = useState(\"\");\n  const {\n    0: pool,\n    1: setpool\n  } = useState(false);\n  const {\n    0: coubonName,\n    1: setcoubonName\n  } = useState(\"\");\n  const {\n    0: pool_total,\n    1: setpool_total\n  } = useState(0);\n  const {\n    0: oldWoman,\n    1: setOldWoman\n  } = useState(0);\n  const {\n    0: oldMan,\n    1: setOldMan\n  } = useState(0);\n  const {\n    0: accibilityPerson,\n    1: setAccibilityPerson\n  } = useState(0);\n  const {\n    0: baby,\n    1: setBaby\n  } = useState(0);\n  const {\n    0: orphanGirls,\n    1: setOrphanGirls\n  } = useState(0);\n  const {\n    0: orphanBoys,\n    1: setOrphanBoys\n  } = useState(0);\n  const {\n    0: girls,\n    1: setGirls\n  } = useState(0);\n  const {\n    0: guys,\n    1: setGuys\n  } = useState(0);\n  const {\n    0: women,\n    1: setWomen\n  } = useState(0);\n  const {\n    0: men,\n    1: setMen\n  } = useState(0);\n  const {\n    0: userInfoMode,\n    1: setuserInfoMode\n  } = useState(false);\n  const {\n    0: MUuserID,\n    1: setMUuserID\n  } = useState(0);\n  const options = [{\n    name: \"Swedish\",\n    value: \"sv\"\n  }, {\n    name: \"English\",\n    value: \"en\"\n  }, {\n    type: \"group\",\n    name: \"Group name\",\n    items: [{\n      name: \"Spanish\",\n      value: \"es\"\n    }]\n  }];\n  const {\n    0: step,\n    1: setStep\n  } = useState(1);\n\n  function approve(UUdata) {\n    let approve = 1;\n    let theUserid = UUdata.id;\n    let mydd = {\n      approve,\n      theUserid\n    };\n    console.log(mydd);\n    api.post(\"rabwa/ApproveUser\", mydd).then(res => {\n      mutate(\"rabwa/GetApproveuserss\");\n      alert.show(\"تم بنجاح\", {\n        timeout: 2000,\n        type: \"success\"\n      });\n      setspinner(false);\n    });\n  }\n\n  function reject(UUdata) {\n    let approve = 3;\n    let theUserid = UUdata.id;\n    let mydd = {\n      approve,\n      theUserid\n    };\n    console.log(mydd);\n    api.post(\"rabwa/ApproveUser\", mydd).then(res => {\n      mutate(\"rabwa/GetApproveuserss\");\n      alert.show(\"تم بنجاح\", {\n        timeout: 2000,\n        type: \"success\"\n      });\n      setspinner(false);\n    });\n  }\n\n  function updateUserMandobe(zzuser_id) {\n    let data = {\n      user_id: zzuser_id,\n      NewMandobe_id: NewMandobe_id\n    };\n    api.post(\"rabwa/updateUserMandobe\", data).then(res => {\n      console.log(res.data);\n    });\n    setNewMandobe_id(0);\n  }\n\n  function openModal(myuserData, type) {\n    let xx = myuserData;\n    setpageup(pageup + 1);\n    setmodalType(\"stats\");\n    setModelData([]);\n    console.log(\"zxzzzzzzzzzzzzzzzzzzz\");\n    console.log(xx);\n    console.log(\"zxzzzzzzzzzzzzzzzzzzz\");\n\n    if (type == \"stats\") {\n      // setnewState(true);\n      let tempUserID = xx.id;\n      setMUuserID(tempUserID);\n      setuserInfoMode(true);\n    } else {\n      setmodalType(type);\n      setModelData(xx);\n    }\n  }\n\n  function calculate() {\n    let mydata = list;\n    let startcount = 0;\n\n    for (let index = 0; index < mydata.length; index++) {\n      let myuser = mydata[index];\n      startcount = startcount + parseInt(myuser.share);\n    }\n\n    setcoubonTotal(startcount);\n  }\n\n  let step2 = step;\n  return __jsx(React.Fragment, null, __jsx(\"body\", {\n    className: \"rtl g-sidenav-show g-sidenav-pinned\",\n    dir: \"rtl\"\n  }, __jsx(\"div\", null, __jsx(Admin_nav, null), __jsx(\"div\", {\n    class: \"main-content\",\n    id: \"panel\"\n  }, __jsx(HeaderNav, null), userInfoMode ? __jsx(UserInfo, {\n    id: MUuserID,\n    setuserInfoMode: setuserInfoMode\n  }) : __jsx(\"div\", {\n    class: \"container-fluid mt--6\"\n  }, __jsx(\"div\", {\n    class: \"row justify-content-center\"\n  }, __jsx(\"div\", {\n    class: \" col \"\n  }, __jsx(\"div\", {\n    class: \"card\"\n  }, __jsx(\"div\", {\n    class: \"card-header bg-transparent\"\n  }, __jsx(\"h3\", {\n    class: \"mb-0\"\n  }, \"\\u0627\\u0644\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0641\\u064A\\u062F\\u064A\\u0646\")), __jsx(\"div\", {\n    class: \"card-body\"\n  }, __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"table-responsive\"\n  }, __jsx(\"div\", null, __jsx(\"table\", {\n    className: \"table align-items-center\",\n    style: {\n      display: step == 1 ? \"\" : \"none\"\n    }\n  }, __jsx(\"thead\", {\n    className: \"thead-light\"\n  }, __jsx(\"tr\", null, __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0641\\u064A\\u062F\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0623\\u0641\\u0631\\u0627\\u062F\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0627\\u0644\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629\"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"budget\"\n  }, \"\\u0627\\u0644\\u0631\\u0641\\u0636\"))), __jsx(\"tbody\", {\n    className: \"list\"\n  }, users.length > 0 ? users.map((data, i) => {\n    return __jsx(NeedyCheckApprove, {\n      data: data,\n      approve: approve,\n      reject: reject,\n      openModal: openModal,\n      setmodalType: setmodalType\n    });\n  }) : \"\")), showSkeleton ? __jsx(Skeleton, {\n    height: 40,\n    count: 10\n  }) : \"\"))), __jsx(\"div\", null), __jsx(\"div\", null, __jsx(\"hr\", null)))))), __jsx(Footer, null)))), __jsx(\"div\", {\n    class: \"modal fade\",\n    id: \"modal-default\",\n    tabindex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"modal-default\",\n    \"aria-hidden\": \"true\"\n  }, __jsx(\"div\", {\n    class: \"modal-dialog modal- modal-dialog-centered modal-\",\n    role: \"document\"\n  }, modalType == \"stats\" ? __jsx(\"div\", {\n    class: \"modal-content\"\n  }) : modalType == \"cards\" ? __jsx(\"div\", {\n    class: \"modal-content\"\n  }) : modalType == \"newCard\" ? __jsx(\"div\", {\n    class: \"modal-content\"\n  }) : modalType == \"updateMandobe\" ? __jsx(\"div\", {\n    class: \"modal-content\"\n  }, __jsx(\"div\", {\n    class: \"modal-header\"\n  }, __jsx(\"h6\", {\n    class: \"modal-title\",\n    id: \"modal-title-default\"\n  }, \"\\u0625\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0645\\u0646\\u062F\\u0648\\u0628\"), __jsx(\"button\", {\n    type: \"button\",\n    class: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\"\n  }, __jsx(\"span\", {\n    \"aria-hidden\": \"true\"\n  }, \"\\xD7\"))), __jsx(\"div\", {\n    class: \"modal-body\"\n  }, ModelData ? __jsx(\"div\", {\n    style: {\n      overflowY: \"scroll\",\n      height: \"300px\",\n      width: \"100%\",\n      paddingRight: \"5%\"\n    }\n  }, __jsx(ListMandobes, {\n    user_id: ModelData.id,\n    mandobe_id: ModelData.mandobe_id,\n    setNewMandobe_id: setNewMandobe_id\n  })) : \"\"), __jsx(\"div\", {\n    class: \"modal-footer\"\n  }, ModelData.mandobe_id > 0 ? __jsx(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    \"data-dismiss\": \"modal\",\n    style: {\n      float: \"left\"\n    },\n    onClick: () => {\n      if (NewMandobe_id > 0) {\n        updateUserMandobe(ModelData.id);\n      }\n\n      console.log(\"heeexxxxxx\");\n      console.log(ModelData.mandobe_id);\n      console.log(\"heeexxxxxx\");\n      console.log(\"yyyyyyyyyyyy\");\n      console.log(NewMandobe_id);\n      console.log(\"yyyyyyyyyyyy\");\n      approve(ModelData);\n    }\n  }, \"\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629\") : NewMandobe_id > 0 ? __jsx(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    \"data-dismiss\": \"modal\",\n    style: {\n      float: \"left\"\n    },\n    onClick: () => {\n      if (NewMandobe_id > 0) {\n        updateUserMandobe(ModelData.id);\n      }\n\n      console.log(\"heeexxxxxx\");\n      console.log(ModelData.mandobe_id);\n      console.log(\"heeexxxxxx\");\n      console.log(\"yyyyyyyyyyyy\");\n      console.log(NewMandobe_id);\n      console.log(\"yyyyyyyyyyyy\");\n      approve(ModelData);\n    }\n  }, \"\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629\") : __jsx(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    style: {\n      float: \"left\"\n    },\n    disabled: true\n  }, \"\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629\"), \" \", __jsx(\"button\", {\n    type: \"button\",\n    class: \"btn btn-link \",\n    \"data-dismiss\": \"modal\",\n    style: {\n      float: \"left\"\n    },\n    onClick: () => {\n      setmodalType(\"stats\");\n    }\n  }, \"\\u0625\\u063A\\u0644\\u0627\\u0642\"))) : \"\"))));\n}\n\nexport default ProtectRoute(GiveNeedyCoubon);","map":null,"metadata":{},"sourceType":"module"}