{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport CoubonTable from \"../components/CoubonTable\";\nimport useAuth, { ProtectRoute } from \"../contexts/auth.js\";\nimport { GetCategorysByCity } from \"../services/api_get\";\nimport { useRouter } from \"next/router\";\nimport Skeleton from \"react-loading-skeleton\";\n\nvar FindBranch = function FindBranch(_ref) {\n  var city = _ref.city,\n      requiredAmount = _ref.requiredAmount,\n      UpdatePool = _ref.UpdatePool,\n      pool = _ref.pool;\n  var router = useRouter();\n\n  var _useAuth = useAuth(),\n      user = _useAuth.user,\n      isAuthenticated = _useAuth.isAuthenticated,\n      loading = _useAuth.loading;\n\n  useEffect(function () {\n    localStorage.Currentcategory = \"\";\n    if (!isAuthenticated && !loading) Router.push(\"/login\");\n  }, [loading, isAuthenticated]);\n\n  var _GetCategorysByCity = GetCategorysByCity(city),\n      data = _GetCategorysByCity.data,\n      isLoading = _GetCategorysByCity.isLoading,\n      isError = _GetCategorysByCity.isError;\n\n  var results = isLoading ? false : data.data;\n  var showSkeleton = isLoading || loading;\n  console.log(results);\n\n  var _useState = useState(false),\n      project = _useState[0],\n      setProject = _useState[1];\n\n  var _useState2 = useState(\"category\"),\n      choose = _useState2[0],\n      setChoose = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      category = _useState3[0],\n      setCategory = _useState3[1];\n\n  var _useState4 = useState(0),\n      Categoryid = _useState4[0],\n      setCategoryid = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      Categoryname = _useState5[0],\n      setCategoryname = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      company = _useState6[0],\n      setCompany = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      Companyname = _useState7[0],\n      setCompanyname = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      Branchid = _useState8[0],\n      setBranchid = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      Branchname = _useState9[0],\n      setBranchname = _useState9[1];\n\n  function selected(amount, section, coubonName, type) {\n    UpdatePool(amount, section, coubonName, type);\n  }\n\n  function displayCards(results) {\n    return __jsx(React.Fragment, null, __jsx(\"h2\", null, Categoryname + Companyname + Branchname), choose == \"category\" ? __jsx(\"div\", null, __jsx(\"div\", {\n      style: {\n        \"float\": \"right\"\n      }\n    }, __jsx(\"h2\", {\n      style: {\n        marginRight: \"0.8em\",\n        display: \"inline\"\n      }\n    }, \"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0641 :\"), __jsx(\"div\", {\n      style: {\n        clear: \"both\"\n      }\n    })), __jsx(\"div\", {\n      \"class\": \"col-xl-12 col-md-12\",\n      style: {\n        height: \"50px\"\n      }\n    }), results ? results.map(function (cat, index) {\n      return __jsx(\"div\", {\n        \"class\": \"col-xl-3 col-md-6\",\n        onClick: function onClick() {\n          console.log(index);\n          setChoose(\"company\");\n          setCategory(cat.data);\n          setCategoryid(cat.id);\n          setCategoryname(cat.name);\n        }\n      }, __jsx(\"div\", {\n        \"class\": \"card card-stats\"\n      }, __jsx(\"div\", {\n        \"class\": \"card-body\"\n      }, __jsx(\"div\", {\n        \"class\": \"row\"\n      }, __jsx(\"div\", {\n        \"class\": \"col\"\n      }, __jsx(\"h2\", {\n        \"class\": \"card-title text-uppercase text-muted mb-0\"\n      }, cat.name)), __jsx(\"div\", {\n        \"class\": \"col-auto\"\n      }, __jsx(\"div\", {\n        \"class\": \"icon icon-shape bg-gradient-red text-white rounded-circle shadow\"\n      }, __jsx(\"i\", {\n        \"class\": \"ni ni-active-40\"\n      })))), __jsx(\"div\", {\n        \"class\": \"row\"\n      }, \" \", __jsx(\"h4\", null, \"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629 :\", \" \", __jsx(\"span\", {\n        style: cat.count > 0 ? {\n          color: \"green\"\n        } : {\n          color: \"red\"\n        }\n      }, cat.count))))));\n    }) : \"\") : \"\", choose == \"company\" ? __jsx(\"div\", null, __jsx(\"div\", {\n      style: {\n        \"float\": \"right\"\n      }\n    }, __jsx(\"button\", {\n      onClick: function onClick() {\n        setChoose(\"category\");\n        setCategoryname(\"\");\n      },\n      \"class\": \"btn btn-icon btn-primary\",\n      type: \"button\"\n    }, __jsx(\"span\", {\n      \"class\": \"btn-inner--icon\"\n    }, __jsx(\"i\", {\n      \"class\": \"fa fa-arrow-right\",\n      \"aria-hidden\": \"true\"\n    }))), __jsx(\"h2\", {\n      style: {\n        marginRight: \"0.8em\",\n        display: \"inline\"\n      }\n    }, \"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u062A\\u062C\\u0631 :\"), __jsx(\"div\", {\n      style: {\n        clear: \"both\"\n      }\n    })), __jsx(\"div\", {\n      \"class\": \"col-xl-12 col-md-12\",\n      style: {\n        height: \"50px\"\n      }\n    }), category.map(function (comp, index) {\n      return __jsx(\"div\", {\n        \"class\": \"col-xl-3 col-md-6\",\n        onClick: function onClick() {\n          console.log(index);\n          setChoose(\"branch\");\n          setCompany(comp.branches);\n          setCompanyname(\" > \" + comp.name);\n        }\n      }, __jsx(\"div\", {\n        \"class\": \"card card-stats\"\n      }, __jsx(\"div\", {\n        \"class\": \"card-body\"\n      }, __jsx(\"div\", {\n        \"class\": \"row\"\n      }, __jsx(\"div\", {\n        \"class\": \"col-auto\"\n      }, __jsx(\"div\", {\n        \"class\": \"icon icon-shape bg-gradient-red text-white rounded-circle shadow\"\n      }, __jsx(\"img\", {\n        width: \"90\",\n        src: \"http://www.panda.com.sa/skin/frontend/ves_audio/defaultar/images/logo.png\"\n      }))), __jsx(\"div\", {\n        \"class\": \"col\"\n      }, __jsx(\"span\", {\n        \"class\": \"h2 font-weight-bold mb-0\"\n      }, comp.name), __jsx(\"h5\", {\n        \"class\": \"card-title text-uppercase text-muted mb-0\"\n      }, \"\\u0645\\u062A\\u062C\\u0631 \\u064A\\u0636\\u0645 \\u0643\\u0644 \\u0645\\u0633\\u062A\\u0644\\u0632\\u0645\\u0627\\u062A \\u0627\\u0644\\u0645\\u0646\\u0632\\u0644\"), __jsx(\"h4\", {\n        className: \"mt-2\"\n      }, \"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629 :\", \" \", __jsx(\"span\", {\n        style: comp.count > 0 ? {\n          color: \"green\"\n        } : {\n          color: \"red\"\n        }\n      }, comp.count)))))));\n    }), \" \") : \"\", choose == \"branch\" ? __jsx(\"div\", null, __jsx(\"div\", {\n      style: {\n        \"float\": \"right\"\n      }\n    }, __jsx(\"button\", {\n      onClick: function onClick() {\n        setChoose(\"company\");\n        setCompanyname(\"\");\n      },\n      \"class\": \"btn btn-icon btn-primary\",\n      type: \"button\"\n    }, __jsx(\"span\", {\n      \"class\": \"btn-inner--icon\"\n    }, __jsx(\"i\", {\n      \"class\": \"fa fa-arrow-right\",\n      \"aria-hidden\": \"true\"\n    }))), __jsx(\"h2\", {\n      style: {\n        marginRight: \"0.8em\",\n        display: \"inline\"\n      }\n    }, \"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0641\\u0631\\u0639 :\"), __jsx(\"div\", {\n      style: {\n        clear: \"both\"\n      }\n    })), __jsx(\"div\", {\n      \"class\": \"col-xl-12 col-md-12\",\n      style: {\n        height: \"50px\"\n      }\n    }), company.map(function (branch, index) {\n      return __jsx(\"div\", {\n        \"class\": \"col-xl-3 col-md-6\",\n        onClick: function onClick() {\n          setChoose(\"section\"); // setSection(branch.Section_id);\n\n          setBranchid(branch.Branch_id);\n          setBranchname(\" > \" + branch.Branch_name);\n        }\n      }, __jsx(\"div\", {\n        \"class\": \"card card-stats\"\n      }, __jsx(\"div\", {\n        \"class\": \"card-body\"\n      }, __jsx(\"div\", {\n        \"class\": \"row\"\n      }, __jsx(\"div\", {\n        \"class\": \"col-auto\"\n      }, __jsx(\"div\", {\n        \"class\": \"icon icon-shape bg-gradient-primary text-white rounded-circle shadow\"\n      }, __jsx(\"i\", {\n        \"class\": \"ni ni-shop\"\n      }))), __jsx(\"div\", {\n        \"class\": \"col\"\n      }, __jsx(\"span\", {\n        \"class\": \"h2 font-weight-bold mb-0\"\n      }, branch.Branch_name), __jsx(\"h5\", {\n        \"class\": \"card-title text-uppercase text-muted mb-0\"\n      }, \"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u062E\\u0631\\u0649\"), __jsx(\"h4\", {\n        className: \"mt-2\"\n      }, \"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629 :\", \" \", __jsx(\"span\", {\n        style: branch.amount > 0 ? {\n          color: \"green\"\n        } : {\n          color: \"red\"\n        }\n      }, branch.amount)))))));\n    }), \" \") : \"\", choose == \"section\" ? __jsx(React.Fragment, null, __jsx(\"div\", {\n      style: {\n        \"float\": \"right\"\n      }\n    }, __jsx(\"button\", {\n      onClick: function onClick() {\n        setChoose(\"branch\");\n        setBranchname(\"\");\n      },\n      \"class\": \"btn btn-icon btn-primary\",\n      type: \"button\"\n    }, __jsx(\"span\", {\n      \"class\": \"btn-inner--icon\"\n    }, __jsx(\"i\", {\n      \"class\": \"fa fa-arrow-right\",\n      \"aria-hidden\": \"true\"\n    }))), __jsx(\"h2\", {\n      style: {\n        marginRight: \"0.8em\",\n        display: \"inline\"\n      }\n    }, \"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0643\\u0648\\u0628\\u0648\\u0646 :\"), __jsx(\"div\", {\n      style: {\n        clear: \"both\"\n      }\n    })), __jsx(\"div\", {\n      \"class\": \"col-xl-12 col-md-12\",\n      style: {\n        height: \"50px\"\n      }\n    }), __jsx(CoubonTable //section={section}\n    , {\n      selected: selected,\n      reqoiredAmount: requiredAmount,\n      Categoryid: Categoryid,\n      Branchid: Branchid,\n      pool: pool\n    })) : \"\");\n  }\n\n  return __jsx(React.Fragment, null, results ? results == \"No_data\" ? __jsx(\"h2\", null, \"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A\") : displayCards(results) : \"\", showSkeleton ? __jsx(Skeleton, {\n    height: 40,\n    count: 10\n  }) : \"\");\n};\n\nexport default FindBranch;","map":null,"metadata":{},"sourceType":"module"}