{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\next\\\\components\\\\NewCardForm.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from \"react\"; //\n\nimport { useForm } from \"react-hook-form\";\nimport api from \"../services/Api\";\nimport { GetCategories } from \"../services/api_get\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { useAlert } from \"react-alert\";\nimport EditableImage2 from \"./EditableImage2\";\nimport ButtonUploadImage from \"./ButtonUpload\";\nimport Cookies from \"js-cookie\";\nimport axios from \"axios\";\nimport { useRouter } from \"next/router\";\nimport useAuth, { ProtectRoute } from \"../contexts/auth.js\";\n\nfunction NewCardForm(_ref) {\n  _s();\n\n  var user_id = _ref.user_id,\n      username = _ref.username,\n      GoBackAndTriggerMutation = _ref.GoBackAndTriggerMutation;\n  var alert = useAlert();\n  var router = useRouter();\n  var token = Cookies.get(\"token\");\n  var siteUrl = Cookies.get(\"siteUrl\");\n\n  var _useState = useState(\"\"),\n      XML = _useState[0],\n      setXML = _useState[1];\n\n  var _useState2 = useState(),\n      ProductImage = _useState2[0],\n      setProductImage = _useState2[1];\n\n  var _useAuth = useAuth(),\n      toggler = _useAuth.toggler,\n      settoggler = _useAuth.settoggler,\n      loading = _useAuth.loading;\n\n  var _useState3 = useState(false),\n      spinner = _useState3[0],\n      setspinner = _useState3[1];\n\n  var _useState4 = useState(false),\n      InputTypedis = _useState4[0],\n      setInputTypedis = _useState4[1];\n\n  var _useState5 = useState(false),\n      InputTypecode = _useState5[0],\n      setInputTypecode = _useState5[1];\n  /*\r\n  const { data, isLoading, isError } = GetCategories();\r\n    const results = isLoading ? false : data.data;\r\n  const showSkeleton = isLoading || loading;\r\n  */\n\n\n  var _useForm = useForm({//mode: \"onChange\",\n  }),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors;\n\n  function handleThumbnailProduct(file) {\n    var imageObj = {\n      id: file.name,\n      name: file.name,\n      isUloading: true,\n      imageObject: file\n    };\n    console.log(imageObj);\n    setProductImage(imageObj);\n    var formData = new FormData();\n    formData.append(\"file\", file);\n    axios.post(siteUrl + \"wp/v2/media\", formData, {\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (result) {\n      console.log(result.data.source_url);\n      setXML(result.data.source_url);\n    });\n  }\n\n  var onSubmit = function onSubmit(formdata) {\n    formdata = _objectSpread(_objectSpread({}, formdata), {}, {\n      user_id: user_id,\n      XML: XML\n    });\n    setspinner(true);\n    console.log(formdata);\n    api.post(\"api/newUserCard\", formdata).then(function (res) {\n      console.log(res.data);\n      setspinner(false);\n\n      if (res.data > 0) {\n        alert.show(\"تم بنجاح\", {\n          timeout: 2000,\n          type: \"success\"\n        });\n        GoBackAndTriggerMutation(); //router.push(\"/companys/[name]\", \"/companys/\" + formdata.companyName);\n      }\n    })[\"catch\"](function (err) {\n      console.log(err);\n      setspinner(false);\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \" \\u0627\\u0636\\u0627\\u0641\\u0629 \\u0628\\u0637\\u0627\\u0642\\u0629 \\u0627\\u0644\\u0649 : \", username), __jsx(\"div\", {\n    dir: \"rtl\",\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    style: {\n      \"float\": \"right\"\n    },\n    className: \"form-control-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0628\\u0637\\u0627\\u0642\\u0629\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    ref: register({\n      required: true,\n      minLength: 3\n    }),\n    className: \"form-control\",\n    placeholder: \"\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0643\\u0648\\u0628\\u0648\\u0646\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  })), errors.name && errors.name.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\"), errors.name && errors.name.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, \"\\u0627\\u0644\\u0625\\u0633\\u0645 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644 \\u0642\\u0635\\u064A\\u0631 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\")), __jsx(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    style: {\n      \"float\": \"right\"\n    },\n    className: \"form-control-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, \"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0646\\u062A\\u0647\\u0627\\u0621\"), __jsx(\"input\", {\n    type: \"date\",\n    name: \"end\",\n    ref: register({\n      required: true\n    }),\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  })), errors.name && errors.name.type === \"required\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u062D\\u0642\\u0644 \\u0645\\u0637\\u0644\\u0648\\u0628\")), __jsx(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    style: {\n      \"float\": \"right\"\n    },\n    className: \"form-control-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, \"\\u0627\\u0644\\u0628\\u0637\\u0627\\u0642\\u0629\"), __jsx(\"div\", {\n    style: {\n      width: \"140px\",\n      margin: \"2em auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 15\n    }\n  }, ProductImage ? __jsx(EditableImage2, {\n    imageObject: ProductImage,\n    removeImageFunc: function removeImageFunc() {\n      return setProductImage(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }) : __jsx(ButtonUploadImage, {\n    typeImage: \"thumbnail\",\n    onChange: function onChange(thumbnail) {\n      return handleThumbnailProduct(thumbnail.target.files[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  })))), __jsx(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    \"class\": \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    style: {\n      \"float\": \"right\"\n    },\n    \"class\": \"form-control-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, \" \", \"\\u0627\\u0644\\u0648\\u0635\\u0641\"), __jsx(\"textarea\", {\n    rows: \"4\",\n    \"class\": \"form-control\",\n    name: \"des\",\n    ref: register({\n      minLength: 3\n    }),\n    placeholder: \"\\u0648\\u0635\\u0641 \\u0627\\u0648 \\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u0625\\u0633\\u062A\\u062E\\u062F\\u0627\\u0645 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }), errors.des && errors.des.type === \"minLength\" && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }, \"\\u0627\\u0644\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0645\\u062F\\u062E\\u0644\\u0629 \\u0642\\u0635\\u064A\\u0631\\u0629 \\u0644\\u0644\\u063A\\u0627\\u064A\\u0629\")))), spinner ? __jsx(\"button\", {\n    className: \"btn btn-default\",\n    disabled: true,\n    style: {\n      \"float\": \"left\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    className: \"spinner-grow spinner-grow-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  }), \"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u0625\\u0631\\u0633\\u0627\\u0644 ..\") : __jsx(\"input\", {\n    style: {\n      \"float\": \"left\"\n    },\n    type: \"submit\",\n    className: \"btn btn-default\",\n    value: loading ? \"Loading...\" : \"إرسال\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  })));\n}\n\n_s(NewCardForm, \"srzEMJJIQIoNJS9+d/8YFDQrdjg=\", false, function () {\n  return [useAlert, useRouter, useAuth, useForm];\n});\n\n_c = NewCardForm;\nexport default NewCardForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewCardForm\");","map":{"version":3,"sources":["C:/xampp/htdocs/next/components/NewCardForm.js"],"names":["React","useState","useEffect","useContext","useForm","api","GetCategories","Skeleton","useAlert","EditableImage2","ButtonUploadImage","Cookies","axios","useRouter","useAuth","ProtectRoute","NewCardForm","user_id","username","GoBackAndTriggerMutation","alert","router","token","get","siteUrl","XML","setXML","ProductImage","setProductImage","toggler","settoggler","loading","spinner","setspinner","InputTypedis","setInputTypedis","InputTypecode","setInputTypecode","register","handleSubmit","errors","handleThumbnailProduct","file","imageObj","id","name","isUloading","imageObject","console","log","formData","FormData","append","post","headers","Authorization","then","result","data","source_url","onSubmit","formdata","res","show","timeout","type","err","textAlign","required","minLength","color","width","margin","thumbnail","target","files","des"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\"; //\r\nimport { useForm } from \"react-hook-form\";\r\nimport api from \"../services/Api\";\r\nimport { GetCategories } from \"../services/api_get\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport { useAlert } from \"react-alert\";\r\nimport EditableImage2 from \"./EditableImage2\";\r\nimport ButtonUploadImage from \"./ButtonUpload\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport { useRouter } from \"next/router\";\r\nimport useAuth, { ProtectRoute } from \"../contexts/auth.js\";\r\n\r\nfunction NewCardForm({ user_id, username, GoBackAndTriggerMutation }) {\r\n  const alert = useAlert();\r\n  const router = useRouter();\r\n  const token = Cookies.get(\"token\");\r\n  const siteUrl = Cookies.get(\"siteUrl\");\r\n  const [XML, setXML] = useState(\"\");\r\n\r\n  const [ProductImage, setProductImage] = useState();\r\n\r\n  const { toggler, settoggler, loading } = useAuth();\r\n  const [spinner, setspinner] = useState(false);\r\n  const [InputTypedis, setInputTypedis] = useState(false);\r\n  const [InputTypecode, setInputTypecode] = useState(false);\r\n  /*\r\n  const { data, isLoading, isError } = GetCategories();\r\n\r\n  const results = isLoading ? false : data.data;\r\n  const showSkeleton = isLoading || loading;\r\n*/\r\n\r\n  const { register, handleSubmit, errors } = useForm({\r\n    //mode: \"onChange\",\r\n  });\r\n\r\n  function handleThumbnailProduct(file) {\r\n    let imageObj = {\r\n      id: file.name,\r\n      name: file.name,\r\n      isUloading: true,\r\n      imageObject: file,\r\n    };\r\n    console.log(imageObj);\r\n    setProductImage(imageObj);\r\n\r\n    let formData = new FormData();\r\n\r\n    formData.append(\"file\", file);\r\n\r\n    axios\r\n      .post(siteUrl + \"wp/v2/media\", formData, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      .then((result) => {\r\n        console.log(result.data.source_url);\r\n        setXML(result.data.source_url);\r\n      });\r\n  }\r\n\r\n  const onSubmit = (formdata) => {\r\n    formdata = { ...formdata, user_id, XML };\r\n    setspinner(true);\r\n    console.log(formdata);\r\n\r\n    api\r\n      .post(\"api/newUserCard\", formdata)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setspinner(false);\r\n\r\n        if (res.data > 0) {\r\n          alert.show(\"تم بنجاح\", {\r\n            timeout: 2000,\r\n            type: \"success\",\r\n          });\r\n          GoBackAndTriggerMutation();\r\n          //router.push(\"/companys/[name]\", \"/companys/\" + formdata.companyName);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setspinner(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <h1 style={{ textAlign: \"center\" }}> اضافة بطاقة الى : {username}</h1>\r\n\r\n        <div dir=\"rtl\" className=\"row\">\r\n          <div className=\"col-6\">\r\n            <div className=\"form-group\">\r\n              <label style={{ float: \"right\" }} className=\"form-control-label\">\r\n                إسم البطاقة\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                ref={register({\r\n                  required: true,\r\n                  minLength: 3,\r\n                })}\r\n                className=\"form-control\"\r\n                placeholder=\"إسم الكوبون\"\r\n              />\r\n            </div>\r\n            {errors.name && errors.name.type === \"required\" && (\r\n              <p style={{ color: \"red\" }}>هذا الحقل مطلوب</p>\r\n            )}\r\n            {errors.name && errors.name.type === \"minLength\" && (\r\n              <p style={{ color: \"red\" }}>الإسم المدخل قصير للغاية</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-6\">\r\n            <div className=\"form-group\">\r\n              <label style={{ float: \"right\" }} className=\"form-control-label\">\r\n                تاريخ الإنتهاء\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"end\"\r\n                ref={register({\r\n                  required: true,\r\n                })}\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            {errors.name && errors.name.type === \"required\" && (\r\n              <p style={{ color: \"red\" }}>هذا الحقل مطلوب</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-12\">\r\n            <div className=\"form-group\">\r\n              <label style={{ float: \"right\" }} className=\"form-control-label\">\r\n                البطاقة\r\n              </label>\r\n              <div style={{ width: \"140px\", margin: \"2em auto\" }}>\r\n                {ProductImage ? (\r\n                  <EditableImage2\r\n                    imageObject={ProductImage}\r\n                    removeImageFunc={() => setProductImage(false)}\r\n                  />\r\n                ) : (\r\n                  <ButtonUploadImage\r\n                    typeImage=\"thumbnail\"\r\n                    onChange={(thumbnail) =>\r\n                      handleThumbnailProduct(thumbnail.target.files[0])\r\n                    }\r\n                  />\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-12\">\r\n            <div class=\"form-group\">\r\n              <label style={{ float: \"right\" }} class=\"form-control-label\">\r\n                {\" \"}\r\n                الوصف\r\n              </label>\r\n              <textarea\r\n                rows=\"4\"\r\n                class=\"form-control\"\r\n                name=\"des\"\r\n                ref={register({\r\n                  minLength: 3,\r\n                })}\r\n                placeholder=\"وصف او طريقة الإستخدام \"\r\n              ></textarea>\r\n              {errors.des && errors.des.type === \"minLength\" && (\r\n                <p style={{ color: \"red\" }}>الوصف المدخلة قصيرة للغاية</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {spinner ? (\r\n          <button\r\n            className=\"btn btn-default\"\r\n            disabled\r\n            style={{ float: \"left\" }}\r\n          >\r\n            <span className=\"spinner-grow spinner-grow-sm\"></span>\r\n            جاري الإرسال ..\r\n          </button>\r\n        ) : (\r\n          <input\r\n            style={{ float: \"left\" }}\r\n            type=\"submit\"\r\n            className=\"btn btn-default\"\r\n            value={loading ? \"Loading...\" : \"إرسال\"}\r\n          />\r\n        )}\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NewCardForm;\r\n"]},"metadata":{},"sourceType":"module"}