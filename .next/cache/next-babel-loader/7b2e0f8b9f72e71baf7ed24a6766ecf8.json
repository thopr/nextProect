{"ast":null,"code":"var __jsx = React.createElement;\nimport Admin_nav from \"../components/Admin_nav\";\nimport React, { useState, useEffect } from \"react\";\nimport HeaderNav from \"../components/HeaderNav\";\nimport ListMandobes from \"../components/ListMandobes\";\nimport UserInfo from \"../components/UserInfo\";\nimport api from \"../services/Api\";\nimport Footer from \"../components/Footer\";\nimport NeedyCheckApprove from \"../components/NeedyCheckApprove\";\nimport { GetApproveuserss, UserStatistics } from \"../services/api_get\";\nimport Skeleton from \"react-loading-skeleton\";\nimport useAuth, { ProtectRoute } from \"../contexts/auth.js\";\nimport { useAlert } from \"react-alert\";\nimport { mutate } from \"swr\";\n\nfunction GiveNeedyCoubon() {\n  //const [project,setProject] = useState(false);\n  var alert = useAlert();\n\n  var _useState = useState(0),\n      name = _useState[0],\n      setname = _useState[1];\n\n  var _useState2 = useState([]),\n      ModelData = _useState2[0],\n      setModelData = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      modalType = _useState3[0],\n      setmodalType = _useState3[1];\n\n  var _useState4 = useState(1),\n      pageup = _useState4[0],\n      setpageup = _useState4[1];\n\n  useEffect(function () {\n    console.log(\"test2zzzzzzzz\");\n  }, [pageup]);\n\n  var _useState5 = useState(0),\n      members = _useState5[0],\n      setmembers = _useState5[1];\n\n  var _useState6 = useState(0),\n      last_coubon = _useState6[0],\n      setlast_coubon = _useState6[1];\n\n  var _useState7 = useState(0),\n      total_coubons = _useState7[0],\n      settotal_coubons = _useState7[1];\n\n  var _useState8 = useState(0),\n      NewMandobe_id = _useState8[0],\n      setNewMandobe_id = _useState8[1];\n\n  var _useState9 = useState(0),\n      piority = _useState9[0],\n      setpiority = _useState9[1];\n\n  var _useState10 = useState(1),\n      page = _useState10[0],\n      setpage = _useState10[1];\n\n  var _useState11 = useState(\"جدة\"),\n      Scity = _useState11[0],\n      setScity = _useState11[1];\n\n  var _useState12 = useState(\"all\"),\n      Saera = _useState12[0],\n      setSaera = _useState12[1];\n\n  var _useState13 = useState(8),\n      Scat = _useState13[0],\n      setScat = _useState13[1];\n\n  var _useState14 = useState(false),\n      spinner = _useState14[0],\n      setspinner = _useState14[1];\n\n  var _useAuth = useAuth(),\n      user = _useAuth.user,\n      isAuthenticated = _useAuth.isAuthenticated,\n      loading = _useAuth.loading;\n\n  var _GetApproveuserss = GetApproveuserss(),\n      data = _GetApproveuserss.data,\n      isLoading = _GetApproveuserss.isLoading,\n      isError = _GetApproveuserss.isError;\n\n  var results = isLoading ? false : data.data;\n  console.log(results);\n  var users = isLoading ? false : results.users;\n  var showSkeleton = isLoading || loading;\n\n  var _useState15 = useState(0),\n      coubonTotal = _useState15[0],\n      setcoubonTotal = _useState15[1];\n\n  var _useState16 = useState([]),\n      CCAs = _useState16[0],\n      setCCAs = _useState16[1];\n\n  var _useState17 = useState([]),\n      categories = _useState17[0],\n      setcategories = _useState17[1];\n\n  var _useState18 = useState(true),\n      firstTime = _useState18[0],\n      setfirstTime = _useState18[1];\n\n  var _useState19 = useState(true),\n      newState = _useState19[0],\n      setnewState = _useState19[1];\n\n  var _useState20 = useState([]),\n      statAll = _useState20[0],\n      setstatAll = _useState20[1];\n\n  var _useState21 = useState([]),\n      list = _useState21[0],\n      updateList = _useState21[1];\n\n  var _useState22 = useState(false),\n      allowed = _useState22[0],\n      setallowed = _useState22[1];\n  /*\r\n    const { data, isLoading, isError } = GetCCAs();\r\n      const results = isLoading ? false : data.data;\r\n    */\n\n\n  var _useState23 = useState(false),\n      project = _useState23[0],\n      setProject = _useState23[1];\n\n  var _useState24 = useState(\"category\"),\n      choose = _useState24[0],\n      setChoose = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      category = _useState25[0],\n      setCategory = _useState25[1];\n\n  var _useState26 = useState(\"\"),\n      company = _useState26[0],\n      setCompany = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      branch = _useState27[0],\n      setBranch = _useState27[1];\n\n  var _useState28 = useState(false),\n      pool = _useState28[0],\n      setpool = _useState28[1];\n\n  var _useState29 = useState(\"\"),\n      coubonName = _useState29[0],\n      setcoubonName = _useState29[1];\n\n  var _useState30 = useState(0),\n      pool_total = _useState30[0],\n      setpool_total = _useState30[1];\n\n  var _useState31 = useState(0),\n      oldWoman = _useState31[0],\n      setOldWoman = _useState31[1];\n\n  var _useState32 = useState(0),\n      oldMan = _useState32[0],\n      setOldMan = _useState32[1];\n\n  var _useState33 = useState(0),\n      accibilityPerson = _useState33[0],\n      setAccibilityPerson = _useState33[1];\n\n  var _useState34 = useState(0),\n      baby = _useState34[0],\n      setBaby = _useState34[1];\n\n  var _useState35 = useState(0),\n      orphanGirls = _useState35[0],\n      setOrphanGirls = _useState35[1];\n\n  var _useState36 = useState(0),\n      orphanBoys = _useState36[0],\n      setOrphanBoys = _useState36[1];\n\n  var _useState37 = useState(0),\n      girls = _useState37[0],\n      setGirls = _useState37[1];\n\n  var _useState38 = useState(0),\n      guys = _useState38[0],\n      setGuys = _useState38[1];\n\n  var _useState39 = useState(0),\n      women = _useState39[0],\n      setWomen = _useState39[1];\n\n  var _useState40 = useState(0),\n      men = _useState40[0],\n      setMen = _useState40[1];\n\n  var _useState41 = useState(false),\n      userInfoMode = _useState41[0],\n      setuserInfoMode = _useState41[1];\n\n  var _useState42 = useState(0),\n      MUuserID = _useState42[0],\n      setMUuserID = _useState42[1];\n\n  var options = [{\n    name: \"Swedish\",\n    value: \"sv\"\n  }, {\n    name: \"English\",\n    value: \"en\"\n  }, {\n    type: \"group\",\n    name: \"Group name\",\n    items: [{\n      name: \"Spanish\",\n      value: \"es\"\n    }]\n  }];\n\n  var _useState43 = useState(1),\n      step = _useState43[0],\n      setStep = _useState43[1];\n\n  function approve(UUdata) {\n    var approve = 1;\n    var theUserid = UUdata.id;\n    var mydd = {\n      approve: approve,\n      theUserid: theUserid\n    };\n    console.log(mydd);\n    api.post(\"rabwa/ApproveUser\", mydd).then(function (res) {\n      mutate(\"rabwa/GetApproveuserss\");\n      alert.show(\"تم بنجاح\", {\n        timeout: 2000,\n        type: \"success\"\n      });\n      setspinner(false);\n    });\n  }\n\n  function reject(UUdata) {\n    var approve = 3;\n    var theUserid = UUdata.id;\n    var mydd = {\n      approve: approve,\n      theUserid: theUserid\n    };\n    console.log(mydd);\n    api.post(\"rabwa/ApproveUser\", mydd).then(function (res) {\n      mutate(\"rabwa/GetApproveuserss\");\n      alert.show(\"تم بنجاح\", {\n        timeout: 2000,\n        type: \"success\"\n      });\n      setspinner(false);\n    });\n  }\n\n  function updateUserMandobe(zzuser_id) {\n    var data = {\n      user_id: zzuser_id,\n      NewMandobe_id: NewMandobe_id\n    };\n    api.post(\"rabwa/updateUserMandobe\", data).then(function (res) {\n      console.log(res.data);\n    });\n    setNewMandobe_id(0);\n  }\n\n  function openModal(myuserData, type) {\n    var xx = myuserData;\n    setpageup(pageup + 1);\n    setmodalType(\"stats\");\n    setModelData([]);\n    console.log(\"zxzzzzzzzzzzzzzzzzzzz\");\n    console.log(xx);\n    console.log(\"zxzzzzzzzzzzzzzzzzzzz\");\n\n    if (type == \"stats\") {\n      // setnewState(true);\n      var tempUserID = xx.id;\n      setMUuserID(tempUserID);\n      setuserInfoMode(true);\n    } else {\n      setmodalType(type);\n      setModelData(xx);\n    }\n  }\n\n  function calculate() {\n    var mydata = list;\n    var startcount = 0;\n\n    for (var index = 0; index < mydata.length; index++) {\n      var myuser = mydata[index];\n      startcount = startcount + parseInt(myuser.share);\n    }\n\n    setcoubonTotal(startcount);\n  }\n\n  var step2 = step;\n  return __jsx(React.Fragment, null, __jsx(\"body\", {\n    className: \"rtl g-sidenav-show g-sidenav-pinned\",\n    dir: \"rtl\"\n  }, __jsx(\"div\", null, __jsx(Admin_nav, null), __jsx(\"div\", {\n    \"class\": \"main-content\",\n    id: \"panel\"\n  }, __jsx(HeaderNav, null), userInfoMode ? __jsx(UserInfo, {\n    id: MUuserID,\n    setuserInfoMode: setuserInfoMode\n  }) : __jsx(\"div\", {\n    \"class\": \"container-fluid mt--6\"\n  }, __jsx(\"div\", {\n    \"class\": \"row justify-content-center\"\n  }, __jsx(\"div\", {\n    \"class\": \" col \"\n  }, __jsx(\"div\", {\n    \"class\": \"card\"\n  }, __jsx(\"div\", {\n    \"class\": \"card-header bg-transparent\"\n  }, __jsx(\"h3\", {\n    \"class\": \"mb-0\"\n  }, \"\\u0627\\u0644\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0641\\u064A\\u062F\\u064A\\u0646\")), __jsx(\"div\", {\n    \"class\": \"card-body\"\n  }, __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"table-responsive\"\n  }, __jsx(\"div\", null, __jsx(\"table\", {\n    className: \"table align-items-center\",\n    style: {\n      display: step == 1 ? \"\" : \"none\"\n    }\n  }, __jsx(\"thead\", {\n    className: \"thead-light\"\n  }, __jsx(\"tr\", null, __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u0641\\u064A\\u062F\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0623\\u0641\\u0631\\u0627\\u062F\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0627\\u0644\\u0623\\u0648\\u0644\\u0648\\u064A\\u0629\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A\", \" \"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"name\"\n  }, \"\\u0627\\u0644\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629\"), __jsx(\"th\", {\n    scope: \"col\",\n    className: \"sort\",\n    \"data-sort\": \"budget\"\n  }, \"\\u0627\\u0644\\u0631\\u0641\\u0636\"))), __jsx(\"tbody\", {\n    className: \"list\"\n  }, users.length > 0 ? users.map(function (data, i) {\n    return __jsx(NeedyCheckApprove, {\n      data: data,\n      approve: approve,\n      reject: reject,\n      openModal: openModal,\n      setmodalType: setmodalType\n    });\n  }) : \"\")), showSkeleton ? __jsx(Skeleton, {\n    height: 40,\n    count: 10\n  }) : \"\"))), __jsx(\"div\", null), __jsx(\"div\", null, __jsx(\"hr\", null)))))), __jsx(Footer, null)))), __jsx(\"div\", {\n    \"class\": \"modal fade\",\n    id: \"modal-default\",\n    tabindex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"modal-default\",\n    \"aria-hidden\": \"true\"\n  }, __jsx(\"div\", {\n    \"class\": \"modal-dialog modal- modal-dialog-centered modal-\",\n    role: \"document\"\n  }, modalType == \"stats\" ? __jsx(\"div\", {\n    \"class\": \"modal-content\"\n  }) : modalType == \"cards\" ? __jsx(\"div\", {\n    \"class\": \"modal-content\"\n  }) : modalType == \"newCard\" ? __jsx(\"div\", {\n    \"class\": \"modal-content\"\n  }) : modalType == \"updateMandobe\" ? __jsx(\"div\", {\n    \"class\": \"modal-content\"\n  }, __jsx(\"div\", {\n    \"class\": \"modal-header\"\n  }, __jsx(\"h6\", {\n    \"class\": \"modal-title\",\n    id: \"modal-title-default\"\n  }, \"\\u0625\\u062E\\u062A\\u064A\\u0627\\u0631 \\u0627\\u0644\\u0645\\u0646\\u062F\\u0648\\u0628\"), __jsx(\"button\", {\n    type: \"button\",\n    \"class\": \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\"\n  }, __jsx(\"span\", {\n    \"aria-hidden\": \"true\"\n  }, \"\\xD7\"))), __jsx(\"div\", {\n    \"class\": \"modal-body\"\n  }, ModelData ? __jsx(\"div\", {\n    style: {\n      overflowY: \"scroll\",\n      height: \"300px\",\n      width: \"100%\",\n      paddingRight: \"5%\"\n    }\n  }, __jsx(ListMandobes, {\n    user_id: ModelData.id,\n    mandobe_id: ModelData.mandobe_id,\n    setNewMandobe_id: setNewMandobe_id\n  })) : \"\"), __jsx(\"div\", {\n    \"class\": \"modal-footer\"\n  }, ModelData.mandobe_id > 0 ? __jsx(\"button\", {\n    type: \"button\",\n    \"class\": \"btn btn-primary\",\n    \"data-dismiss\": \"modal\",\n    style: {\n      \"float\": \"left\"\n    },\n    onClick: function onClick() {\n      if (NewMandobe_id > 0) {\n        updateUserMandobe(ModelData.id);\n      }\n\n      console.log(\"heeexxxxxx\");\n      console.log(ModelData.mandobe_id);\n      console.log(\"heeexxxxxx\");\n      console.log(\"yyyyyyyyyyyy\");\n      console.log(NewMandobe_id);\n      console.log(\"yyyyyyyyyyyy\");\n      approve(ModelData);\n    }\n  }, \"\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629\") : NewMandobe_id > 0 ? __jsx(\"button\", {\n    type: \"button\",\n    \"class\": \"btn btn-primary\",\n    \"data-dismiss\": \"modal\",\n    style: {\n      \"float\": \"left\"\n    },\n    onClick: function onClick() {\n      if (NewMandobe_id > 0) {\n        updateUserMandobe(ModelData.id);\n      }\n\n      console.log(\"heeexxxxxx\");\n      console.log(ModelData.mandobe_id);\n      console.log(\"heeexxxxxx\");\n      console.log(\"yyyyyyyyyyyy\");\n      console.log(NewMandobe_id);\n      console.log(\"yyyyyyyyyyyy\");\n      approve(ModelData);\n    }\n  }, \"\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629\") : __jsx(\"button\", {\n    type: \"button\",\n    \"class\": \"btn btn-primary\",\n    style: {\n      \"float\": \"left\"\n    },\n    disabled: true\n  }, \"\\u0645\\u0648\\u0627\\u0641\\u0642\\u0629\"), \" \", __jsx(\"button\", {\n    type: \"button\",\n    \"class\": \"btn btn-link \",\n    \"data-dismiss\": \"modal\",\n    style: {\n      \"float\": \"left\"\n    },\n    onClick: function onClick() {\n      setmodalType(\"stats\");\n    }\n  }, \"\\u0625\\u063A\\u0644\\u0627\\u0642\"))) : \"\"))));\n}\n\nexport default ProtectRoute(GiveNeedyCoubon);","map":null,"metadata":{},"sourceType":"module"}